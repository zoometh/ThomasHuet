---
title: "Authoring, writing and publishing with<br>R Markdown"
author: "Thomas Huet, University of Oxford "
title-slide-attributes:
    data-background-image: "https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png"
    data-background-size: "33%"
    data-background-opacity: "0.2"
include-in-header: 
  text: |
    <style>
      .custom-small table {
        font-size: .5em
      }
    </style>
format:
  revealjs: 
    controls: true
    slide-number: true
    chalkboard: true
    scrollable: true
    preview-links: auto
    reference-location: document
    footnotes-hover: true
    logo: https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/inst-uni-oxford_.png
    # css: ../styles.css
    # css: https://zoometh.github.io/thomashuet/teach/stats/r4a/styles.css
    css: https://zoometh.github.io/thomashuet/css/quarto.css
    margin: 0.01
    width: 1200
bibliography: references.bib
pagetitle: Report with R Markdown
footer: "Report with R Markdown - R4Rchaeologists <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png' style='height: 35px;vertical-align: middle;'> Universit√† di Pisa, Feb 2024 - <em>presented by </em> Thomas Huet"
---

## Introduction

```{r echo=FALSE, eval=FALSE}
## Not run
# install.packages("archdata")
# install.packages("rmarkdown")
# install.packages("tinytex")
# install.packages("bookdown")
# install.packages("dplyr")
# install.packages("leaflet")
# install.packages("plotly")
# install.packages("rgl")
library(archdata)
library(rmarkdown)
library(tinytex)
library(bookdown)
library(dplyr)
library(leaflet)
library(plotly)
library(rgl)
```

::: {.panel-tabset}

### R Markdown

<span class="r-md">R Markdown</span> is an authoring framework for data science (AFDS). It combines R code chunks and narrative parts with -- mainly -- Markdown syntax

\

::: {.callout-note}
R Markdown = `.Rmd` =  <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-r.png' style='height: 45px;vertical-align: middle;'> `.R` + <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-pao-markdown.png' style='height: 45px;vertical-align: middle;'> `.md` for Markdown
:::


### AFDS

AFDS are used to create data-driven documents (reports) with a notebook interface

<table>
<thead>
  <tr>
    <th>AFDS</th>
    <th>Language</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><span class="r-md">R Markdown</span></td>
    <td>R</td>
    <td>front-end oriented</td>
  </tr>
  <tr>
    <td>[Jupyter](https://hub.mybinder.turing.ac.uk/user/ipython-ipython-in-depth-qd7itkd2/notebooks/binder/Index.ipynb)</td>
    <td>Python</td>
    <td>back-end oriented</td>
  </tr>
  <tr>
    <td>[D3.js](https://d3js.org/)</td>
    <td rowspan="2">JavaScript</td>
    <td rowspan="2">web oriented</td>
  </tr>
  <tr>
    <td>[Plotly](https://plotly.com/)</td>
  </tr>
</tbody>
</table>


### About this document

A <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-web-js-revealjs-1.png' style='height: 45px;vertical-align: middle;'> Quarto document (`.qmd`) using <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-r-quarto-2.png' style='height: 45px;vertical-align: middle;'> reveal.js (JavaScript) hosted on <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/github.png' style='height: 45px;vertical-align: middle;'> GitHub ([here](https://github.com/zoometh/thomashuet/blob/main/teach/stats/r4a/2024/index.qmd))

```{=html}
<script src="https://quarto.org/docs/presentations/revealjs/"></script>
```


:::
\

## Why R Markdown?

::: {.panel-tabset}

### Academic reporting

<span class="r-md">R Markdown</span> is often enough for academic reporting. It supports:

* HTML/CSS markup languages <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-html.png' style='height: 45px;vertical-align: middle;'><img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-css.png' style='height: 45px;vertical-align: middle;'>
* cross-referencing, <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-pao-latex.png' style='height: 45px;vertical-align: middle;'> writing and <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-pao-bibtex.png' style='height: 45px;vertical-align: middle;'> bibliographic references 
* interactive maps, 3D plots, etc.

### Popularity of <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-r.png' style='height: 45px;vertical-align: middle;'>


::: custom-small


| Language    | User Community | Learning Curve | Statistics                          | 3D                          | AI/ML                | GIS/DB                  | Data-driven doc                                  | Web App Framework                 |
|-------------|-----------------|-----------------|-------------------------------------|------------------------------------|------------------------------------|------------------------------------|------------------------------------|------------------------------------|
| Python      | Large and diverse | Relatively easy  | Strong support  | Blender, libraries[^1] | Leading language[^2] | Leading language[^8] | Jupyter Notebook                                  | Popular frameworks[^4] |
| Java        | Large and established | Moderate  | Limited   | Java 3D API   | Used in enterprise | Java-based tools available  | Apache POI                                  | Various frameworks[^5] |
| JavaScript  | Ubiquitous in web dev | Easy for web dev | Limited | WebGL | web-based apps | Limited  | D3.js                                  | Numerous frameworks[^6] |
| MATLAB      | Academia, industry | Steeper  | Comprehensive support | Poor texture mapping | Academia, industry | Limited   |  Live scripts but hard to share  | Limited   |
| R           | Strong community | Steeper         | Leading language | Poor texture mapping  | Extensively used | R packages for GIS[^7] | Rmarkdown, Shiny                           | Limited   | Many free packages |

:::

[^1]: PyOpenGL
[^2]: TensorFlow, PyTorch

[^4]: Django
[^5]: Spring
[^6]: React 
[^7]: sf 
[^8]: QGIS, ArcGIS, libraries: geopandas

### Ubiquity of <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-pao-markdown.png' style='height: 45px;vertical-align: middle;'>

Copy/paste can be done over numerous code-oriented platforms without losing the typesetting (easy-to-write plain text syntax):

* <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-pao-markdown-ex-arches-forum.png' style='height: 250px;'>

* <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-pao-markdown-ex-github-readme.png' style='height: 250px;'>

* <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-pao-markdown-ex-chatgpt.png' style='height: 250px;'>


:::

## Main packages

<table>
<tbody>
  <tr>
    <td><img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-knitr.png' style='width: 100px;vertical-align: middle;'></td>
    <td>[knitr](https://yihui.org/knitr/) engine for dynamic report generation with R (e.g. convert to LaTeX)</td>
  </tr>
  <tr>
    <td><img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-r-pkg-rmarkdown.png' style='width: 100px;vertical-align: middle;'></td>
    <td>[rmarkdown](https://cran.r-project.org/web/packages/rmarkdown/index.html) convert R Markdown documents into a variety of formats, extension of {`knitr`}</td>
  </tr>
    <tr>
    <td><img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-bookdown.png' style='width: 100px;vertical-align: middle;'></td>
    <td>[bookdown](https://bookdown.org/) advanced editing and publishing functions (e.g. cross referencing)</td>
  </tr>
</tbody>
</table>


## New document

  
::: {.panel-tabset}
  

### Create

In RStudio: `File > New file > R Markdown...`

<center>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_create.png){width="500px"}

</center>

Options (`Title`, `Author`, `Date`, etc.) can be changed later. Choose **PDF** as the default output format.

<center>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_create_rmd.png){width="500px"}

</center>  

::: {.callout-note}
A new document is created.
:::


### RStudio <small>preview</small>


<center>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_create_rmd_new.png){width="900px"}

</center>

### GitHub <small>preview</small>


```{=html}
<script src="https://gist.github.com/zoometh/d1b4945d1c16f853a7888ede03c4807d.js"></script>
```

### Knit

Run the new document with `knitr` <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-knitr.png" style="height: 40px;vertical-align: middle;"/>, it will launch the render

<center>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_render.png){width="900px"}

</center>
\
\

:::


## RStudio tools

::: {.panel-tabset}

### Tools

<img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_scriptWindowTopBar.png" alt=" " align="left"/>

<table>
<thead>
  <tr>
    <th>tool</th>
    <th>description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_knitOnSave.png){width="80px"}</td>
    <td>knit <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-knitr.png" style="height: 40px;vertical-align: middle;"/>automatically when save the document</td>
  </tr>
  <tr>
    <td>![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_checkSpelling.png){width="80px"}</td>
    <td>check spelling</td>
  </tr>
  <tr>
    <td>![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_knit.png){width="80px"}</td>
    <td>knit <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-knitr.png" style="height: 40px;vertical-align: middle;"/>the document</td>
  </tr>
  <tr>
    <td>![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_mdFormatOpt.png){width="80px"}</td>
    <td>run Visual R Markdown + other options</td>
  </tr>
  <tr>
    <td>![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_newCodeChunk.png){width="80px"}</td>
    <td>new code chunk (R, Bash, D3, Python, etc.)</td>
  </tr>
  <tr>
    <td>![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_run.png){width="80px"}</td>
    <td>run a part or the whole document</td>
  </tr>
  <tr>
    <td>![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_publish.png){width="80px"}</td>
    <td>publish the document</td>
  </tr>
  <tr>
    <td>![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_visualMdEditor.png){width="80px"}</td>
    <td>run Visual R Markdown</td>
  </tr>
</tbody>
</table>

### Visual R Markdown {#vrm}

<img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www//rmd_nav_visualMdEditor_bar.png" align="left"/><br>
  
[Visual R Markdown](https://rstudio.github.io/visual-markdown-editing/) has a Pandoc syntax[^2], supports [Zotero](https://www.zotero.org/) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-bib-zotero.png" style="height: 45px;vertical-align: middle;"/>, can retrieve complete bibliographical references from DOI <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/lod-doi.png" style="height: 45px;vertical-align: middle;"/> or searches on PubMed <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-bib-pubmed.png" style="height: 45px;vertical-align: middle;"/>, Crossref <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-bib-crossref.png" style="height: 45px;vertical-align: middle;"/>, and DataCite <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-bib-datacite.png" style="height: 45px;vertical-align: middle;"/>

:::

::: {.callout-note}
Use the R package <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-bookdown.png' style='width: 100px;vertical-align: middle;'> [bookdown](https://bookdown.org/) for advanced editing and publishing functions (e.g. cross referencing)</td
:::


[^2]: extension of Markdown

## Document structure {auto-animate=true}

<span class="r-md">R Markdown</span> combines

:::: {.columns}
::: {.column width="50%"}

<div class="div-yaml"> 
<small>header YAML</small><br>
a [YAML header](#yaml) with metadata
</div>

<div class="div-code"> 
<small>code chunk</small><br>
R [code chunks](#chunks)
</div>

<div class="div-text"> 
<small>narrative part</small><br>
Markdown [narrative parts](#text)
</div>

:::

::: {.column width="50%"}

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_create_rmd_new_skrinked.png){width="500px"}

:::

::::

## Document structure {auto-animate=true}

<span class="r-md">R Markdown</span> combines

:::: {.columns}
::: {.column width="50%"}

<div class="div-yaml"> 
<small>header YAML</small><br>
a [YAML header](#yaml) with metadata
</div>

<br>

<div class="div-code"> 
<small>code chunk</small><br>
R [code chunks](#chunks)
</div>

<div class="div-text"> 
<small>narrative part</small><br>
Markdown [narrative parts](#text)
</div>

<div class="div-code"> 
<small>code chunk</small><br>
R [code chunks](#chunks)
</div>

<div class="div-text"> 
<small>narrative part</small><br>
Markdown [narrative parts](#text)
</div>

<div class="div-code"> 
<small>code chunk</small><br>
R [code chunks](#chunks)
</div>

<div class="div-text"> 
<small>narrative part</small><br>
Markdown [narrative parts](#text)
</div>

etc.

:::

::: {.column width="50%"}

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_create_rmd_new_skrinked.png){width="500px"}

:::

::::

## Markdown syntax {#text}

::: {.panel-tabset}

### Used by

Different code-oriented frameworks: [Jupyter](https://hub.mybinder.turing.ac.uk/user/ipython-ipython-in-depth-qd7itkd2/notebooks/binder/Index.ipynb) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-python-jupyter.png" style="height: 45px;vertical-align: middle;"/>, [GitHub](https://github.com/) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-github.png" style="height: 45px;vertical-align: middle;"/>, [GitLab](https://about.gitlab.com/) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-gitlab.png" style="height: 45px;vertical-align: middle;"/>, [Wordpress](https://wordpress.com/) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-com-wordpress.png" style="height: 45px;vertical-align: middle;"/>, [Google Doc](https://www.google.co.uk/docs/about/) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-google-doc.png" style="height: 45px;vertical-align: middle;"/>, [Sketchfab](https://sketchfab.com/3d-models/roche-de-larcher-a5c0771d898d4816950570cd7fb1be37) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-3d-sketchfab.png" style="height: 45px;vertical-align: middle;"/>, [Slack](https://eamena.slack.com/archives/D02KMQULWVD/p1637257246040200) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-com-slack.png" style="height: 45px;vertical-align: middle;"/>, [Stackoverflow](https://stackoverflow.com/a/14747656/2854081) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-z-stackoverflow.png" style="height: 45px;vertical-align: middle;"/>, [Reddit](https://www.reddit.com/) <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-com-reddit.png" style="height: 45px;vertical-align: middle;"/>, etc.


### Syntax


```{=html}
<iframe width="1000" height="600" src="https://rmarkdown.rstudio.com/authoring_basics.html" title="Markdown basic syntax"></iframe>
```
<small><https://rmarkdown.rstudio.com/authoring_basics.html></small>
\

### Editor

```{=html}
<iframe width="1000" height="300" src="https://stackedit.io/app#" title="Markdown online editor"></iframe>
```
<small><https://stackedit.io/app#></small>
\

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_create_rmd_new_skrinked.png){width="500px"}

### Converter

Pandoc is an extension of Markdown, useful for text conversions (Markdown <-> <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-win-word.png' style='height: 45px;vertical-align: middle;'>, Markdown <-> <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-html.png' style='height: 45px;vertical-align: middle;'>, Markdown <-> <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-pao-latex.png' style='height: 45px;vertical-align: middle;'>, etc.)

```{=html}
<iframe width="1000" height="300" src="https://pandoc.org/try/" title="Pandoc online convertor"></iframe>
```
<small><https://pandoc.org/try/></small>
\

::: {.callout-tip}
## Converters

With [Pandoc](https://pandoc.org/try/), exists a lot of online apps making the conversions easier (e.g. [Word to HTML](https://wordtohtml.net/)).
:::
\

:::

## Styling

::: {.panel-tabset}

### Text

+---------------------------------------+-------------------------------------+
| Markdown                              | Rendered                            |
+=======================================+=====================================+
| `**bold**, __bold__`                  | **bold**, **bold**                  |
+---------------------------------------+-------------------------------------+
| `*italic*, _italic_`                  | *italic*, *italic*                  |
+---------------------------------------+-------------------------------------+
| `code`                                | `code`                              |
+---------------------------------------+-------------------------------------+
| `hyphen -- inserted -- in a sentence` | hyphen -- inserted -- in a sentence |
+---------------------------------------+-------------------------------------+
| `H~2~O`                               | H~2~O                               |
+---------------------------------------+-------------------------------------+
| `10^‚àí19^`                             | 10^‚àí19^                             |
+---------------------------------------+-------------------------------------+
| ...                                   | ...                                 |
+---------------------------------------+-------------------------------------+

### Math formula

| Markdown                   | Rendered                 |
|----------------------------|--------------------------|
| `$$\sum_{i=1}^{n} X^3_i$$` | $$\sum_{i=1}^{n} X^3_i$$ |
| ...                        | ...                      |

### Others

blockquotes 

<div class="div-text"> 
<small>narrative part</small><br>
```{.md }
> I am a blockquote
```
</div>

> I am a blockquote


line separator

<div class="div-text"> 
<small>narrative part</small><br>
```{.md }
‚¨áÔ∏è This is a line separator
---
```
</div>  

‚¨áÔ∏è This is a line separator
---
  

### with HTML and CSS

Text styling can be extended done with HTML/CSS markup languages <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-html.png' style='height: 45px;vertical-align: middle;'><img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-prg-css.png' style='height: 45px;vertical-align: middle;'>

<div class="div-text"> 
<small>narrative part</small><br>
```{.html}
<h2 style="color:blue;">A Blue Heading</h2>
<p style="color:red;">A red paragraph.</p>
```
</div>
<h1 style="color:blue;">A Blue Heading</h1>
<p style="color:red;">A red paragraph.</p>

:::


## List

::: {.panel-tabset}


### Numbered 

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
- Numbered  
  1. first element
  2. second element
```
</div>

- Numbered  
  1. first element
  2. second element


\

### Unnumbered

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
- Unnumbered
  * first element
  * second element
  * third element
    - third element - sub 1
      + third element - sub 1 - subsub 1
      + third element - sub 1 - subsub 2
```
</div>

- Unnumbered
  * first element
  * second element
  * third element
    - third element - sub 1
      + third element - sub 1 - subsub 1
      + third element - sub 1 - subsub 2
      
:::      

## Tables {.unnumbered}

::: {.panel-tabset}

### Simple table

:::: {.columns}
::: {.column width="40%"}

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
| Header 1 | Header 2 |
| --- | ----------- |
| Row 1 | Text |
| Row 2 | Another text |
```
</div>

:::

::: {.column width="10%"}
<center> or </center> 
:::

::: {.column width="50%"}

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
| Header 1    | Header 2    |
| ----------- | ----------- |
| Row 1       | Text        |
| Row 2       | Another text|
```
</div>

:::

::::
  
  
<br><br> <center> gives the same result : </center> <br>

| Header 1    | Header 2    |
| ----------- | ----------- |
| Row 1       | Text        |
| Row 2       | Another text|

### Alignements

Use `:----:`, `:---`, or `---:` to align

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
| Left        |    Center   |         Right |
| :---        |    :----:   |          ---: |
| Header      | Title       | Here's this   |
| Paragraph   | Text        | And more      |
```
</div>


| Left      | Center |       Right |
|:----------|:------:|------------:|
| Header    | Title  | Here's this |
| Paragraph |  Text  |    And more |

### Complex tables

Complex tables needs are created inside code chunks, e.g. [kable()](https://bookdown.org/yihui/rmarkdown-cookbook/kable.html) from {`knitr`} with [kable_styling()](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html) from {`kableExtra`}

<div class="div-code"> 
<small>code chunk</small><br>
```{r echo = TRUE}
library(kableExtra)
dt <- mtcars[1:5, 1:6]
dtt <- dt %>%
  kbl() %>%
  kable_paper("hover", full_width = F, font_size = 20)
```
</div>
```{r echo = FALSE}
dtt
```

<div class="div-code"> 
<small>code chunk</small><br>
```{r echo=TRUE}
dtt <- dt %>%
  kbl(caption = "Recreating booktabs style table") %>%
  kable_classic(full_width = F, html_font = "Cambria", font_size = 20)
```
</div>
```{r echo = FALSE}
dtt
```

\
\

### Hint

Use a table converter

```{=html}
<iframe width="1000" height="400" src="https://tableconvert.com/" title="Online table convertor"></iframe>
```

<small><https://tableconvert.com/></small>

:::



## Images

::: {.panel-tabset}

### Online images

Markdown notation

<div class="div-text"> 
<small>narrative part</small><br>
```{.md }
![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png){width=100px}
```
</div>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png){width=100px}

---

HTML notation

<div class="div-text"> 
<small>narrative part</small><br>
```{.md code-line-numbers="1"}
<img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png" width=100>
```
</div>

<img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png" width=100>


### Local images

Markdown notation

<div class="div-text"> 
<small>narrative part</small><br>
```{.md }
![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png){width=100px}
```
</div>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png){width=100px}

---

HTML notation

<div class="div-text"> 
<small>narrative part</small><br>
```{.md }
<img src="www/logo.png" alt="" width=100>  
```
</div>

<img src="www/logo.png" alt="" width=100>  



:::

## Spaces and end of lines

::: {.panel-tabset}

### Spaces

Extra spaces (HTML only)

-   ‚ÄÉ `&emsp;` means 4 spaces (= a tabulation)
-   ‚ÄÇ `&ensp;` means 2 spaces
-   ¬† `&nbsp;` means 1 space

### End of line

End of line (`<br>` in HTML) with 2 or more spaces and return -- or `\` and return -- for example:



:::: {.columns}

::: {.column width="50%"}

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
Reconnais-toi  
Cette adorable personne c'est toi  
Sous le grand chapeau canotier  
Oeil
Nez  
Ta Bouche  
Voici l‚Äôovale de ta figure  
Ton cou Exquis  
(Apollinaire, 1913)
```
</div>

Reconnais-toi  
Cette adorable personne c'est toi  
Sous le grand chapeau canotier  
Oeil
Nez  
Ta Bouche  
Voici l‚Äôovale de ta figure  
Ton cou Exquis  
(Apollinaire, 1913)

:::

::: {.column width="50%"}

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
Reconnais-toi\
Cette adorable personne c'est toi\
Sous le grand chapeau canotier\
Oeil\ 
Nez\
Ta Bouche\
Voici l'ovale de ta figure\
Ton cou Exquis\
(Apollinaire, 1913)
```
</div>

Reconnais-toi\
Cette adorable personne c'est toi\
Sous le grand chapeau canotier\
Oeil\
Nez\
Ta Bouche\
Voici l'ovale de ta figure\
Ton cou Exquis\
(Apollinaire, 1913)

:::

::::


:::

## Titles

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
# Header level 1

## Header level 2

### Header level 3

#### ...

```
</div>


::: {.panel-tabset}

    
### Avoid numbering

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
### My Header level 3 {-}
```
</div>

### .. add an anchor

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}
### My Header level 3 {-#bookmarks}
```
</div>

### .. add an hyperlink to the anchor

<div class="div-text"> 
<small>narrative part</small><br>
```{.md}

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua (**see [My Header level 3](#bookmarks)). Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum

### My Header level 3 {-#bookmarks}
```
</div>

:::

## Hyperlinks {.unnumbered}

Add hyperlinks

::: {.panel-tabset}

### To text

<div class="div-text"> 
<small>narrative part</small><br>
```{.md }
part 2: [Practice](https://github.com/zoometh/thomashuet/tree/main/teachings/stats/r4a/2024/2_R Markdown_Practice)
```
</div>
part 2: [Practice](https://github.com/zoometh/thomashuet/tree/main/teachings/stats/r4a/2024/2_R Markdown_Practice)

### To images

<div class="div-text"> 
<small>narrative part</small><br>
```{.md }
[![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png){width=170px}](https://www.unipi.it/index.php/humanities/item/16574-r4rchaeologists)
```
</div>
[![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/logo.png){width="170px"}](https://www.unipi.it/index.php/humanities/item/16574-r4rchaeologists)


:::



## Bookmarks {#bookmarks .unnumbered}


The header `## Practice` has the anchor `#practice-anchor` inside curly brackets:

<div class="div-text"> 
<small>narrative part</small><br>
```{.md code-line-numbers="1"}
## Practice {#practice-anchor}

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
```
</div>

It is called by:

<div class="div-text"> 
<small>narrative part</small><br>
```{.md }
After this theoretical part, you will do a [practice](#practice-anchor)
```
</div>

After this theoretical part, you will do a [practice](#practice) 
\
\

## Footnotes {.unnumbered}

<div class="div-text"> 
<small>narrative part</small><br>
```{.md code-line-numbers="1|4"}
A simple footnote[^1]
...
...
[^1]: This is the first footnote.
```
</div>

A simple footnote[^1]  
...  
...  
  
[^1]: This is the first footnote.


## Cross-referencing

::: {.panel-tabset}

### Concept

Locators to cite and reuse variables (figures, sections, etc.)

<center>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd-cross-ref-example.png){width="600px"}

</center>

### Variables

Variables calculated inside the code chunks can be called in the narrative part: <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_call_var.png' style='height: 45px;vertical-align: middle;'>

<div class="div-code"> 
<small>code chunk</small>
```{r echo=TRUE}
library(archdata)
data("Handaxes")
number.of.axes <- nrow(Handaxes)
```
</div>

<div class="div-text"> 
<small>narrative part</small>
```{.md}
Furze Platt dataset counts 'r number.of.axes' axes
```
</div>
Furze Platt dataset counts `r number.of.axes` axes

<center>---</center>

Variables can be also be calculated outside code chunks (*not recommended*),  with an inline R code:

<div class="div-text"> 
<small>narrative part</small>
```{.md}
Furze Platt dataset counts 'r number.of.axes' axes described BY 'r ncol(Handaxes)' variables. The maximal length (L = 'r max(Handaxes$L)')
```
</div>
Furze Platt dataset counts `r number.of.axes` axes described by `r ncol(Handaxes)` variables. The maximal length (L = `r max(Handaxes$L)`)
\

::: {.callout-warning}
Here the <notes>`</notes> quote has been changed to a <notes>'</notes> quote for display purpose
:::
\


### Figures

<div class="div-code"> 
<small>code chunk</small>
```{.r}
{r maxLmaxB, echo=TRUE, fig.align="center", fig.cap= "Axes L/B ratio"}
```
</div>
  

```{r maxLmaxB, echo=TRUE, fig.align="center", fig.cap= "Axes L/B ratio"}
#| out-width: "70%"

library(archdata)
data("Handaxes")
plot(Handaxes$L, Handaxes$B)
model <- lm(B ~ L, data = Handaxes)
abline(lm(model))
```

```{r ddd, echo=FALSE, fig.align="center", fig.cap= "Axes L/B ratio"}
#| out-width: "70%"

library(archdata)
data("Handaxes")
plot(Handaxes$L, Handaxes$B)
model <- lm(B ~ L, data = Handaxes)
abline(lm(model))
```  
  
<div class="div-text"> 
<small>narrative part</small>
```{.md }
the distribution of the maximum length (L) and maximum breadth (B) shows a R^2^ = 'r round(model$coefficients[2], 2)',  Fig. \@ref(fig:maxLmaxB))
```
</div>
the distribution of the maximum length (L) and maximum breadth (B) shows a R^2^ = `r round(model$coefficients[2], 2)`,  Fig. \@ref(fig:maxLmaxB))

see: [native Rmd](https://github.com/zoometh/thomashuet/blob/main/teach/stats/r4a/examples/cross-referencing.Rmd) and [rendered PDF](https://github.com/zoometh/thomashuet/blob/main/teach/stats/r4a/examples/cross-referencing.pdf)


::: {.callout-note}
Here, in the syntax, the <notes>`</notes> quote has been changed to a <notes>'</notes> quote for display purpose. Here the figure callout `\@ref(fig:maxLmaxB))` is not rendered because this document is a Quarto presentation using {`revealjs`} instead of {`bookdown`}.
:::


\



:::

## Bibliographic references

::: {.panel-tabset}


### in YAML

BibTex, or `.bib`, is a plain text format for bibliographic references.

<center>

<img src="www/rmd_bib.png" alt="rmd_bib" width="700"/>

</center>
  
  
This file is referenced in the YAML header.
  
  
<center>

<img src="www/rmd_create_rmd_new-bib.png" alt="rmd_yaml_bib" width="700"/>

</center>


### references.bib

```{=html}
<script src="https://gist.github.com/zoometh/f9e61b40970403765a080fa5a63b05e9.js"></script>
```

### Cross citation

+---------------------------------------------+-------------------------------------------+
| code in R Markdown                          | Render                                    |
+=============================================+===========================================+
| `@Xie22`                                    | @Xie22                                    |
+---------------------------------------------+-------------------------------------------+
| `[@Xie18]`                                  | [@Xie18]                                  |
+---------------------------------------------+-------------------------------------------+
| `[credits: @Xie20]`                         | [credits: @Xie20]                         |
+---------------------------------------------+-------------------------------------------+
| `published by Yihui Xie [-@Xie19; -@Xie22]` | published by Yihui Xie [-@Xie19; -@Xie22] |
+---------------------------------------------+-------------------------------------------+
| ...                                         | ...                                       |
+---------------------------------------------+-------------------------------------------+

### BibTex

<div class="div-text"> 
<small>narrative part</small>
```{.md}
published by Yihui Xie [-@Xie19]
```
</div>
published by Yihui Xie [-@Xie19]
  
    
    
It's easy to retrieve [this reference in Google Scholar](https://scholar.google.fr/scholar?hl=en&as_sdt=0%2C5&q=Tinytex%3A+A+Lightweight%2C+Cross-Platform%2C+and+Easy-to-Maintain+Latex+Distribution+Based+on+Tex+Live&btnG=), and paste it in the `.bib` file.

:::



## Code chunks {#chunks}


R code chunks are placeholders for the coding part of the document, expressed with a local header, and a body part.

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_codechunk_header.png)

## Headers

::: {.panel-tabset}

### Headers options

<div class="div-code"> 
<small>code chunk</small>
```{.r }
{r munsingenspat, echo = TRUE, warning = FALSE, message = FALSE}
```
</div>

Options are used to show/hide the code, change the size of the output image, set the alignment of the ouptut, etc.

<center>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_create_rmd_new.png){width="900px"}

</center>

<https://github.com/zoometh/thomashuet/blob/main/teachings/stats/R4Archaeo/temp.pdf>


### Options hierarchy 

<div class="div-code"> 
<small>code chunk</small>
```{.r }
{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
</div>

The üîù chunk in the document allows to set these options for all other chunks unless you change these options in the following code chunks headers


```{=html}
<script src="https://gist.github.com/zoometh/d1b4945d1c16f853a7888ede03c4807d.js"></script>
```

:::

## Tools

:::: {.columns}

::: {.column width="50%"}

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_create_rmd_new_skrinked.png){width="700px"}

:::


::: {.column width="50%"}

<table>
<thead>
  <tr>
    <th>tool</th>
    <th>description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td> <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_nav_mdFormatOpt.png' style='height: 50px;vertical-align: middle;'></td>
    <td>graphical interface for options</td>
  </tr>
  <tr>
    <td><img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_codechunk_header_runabove.png' style='height: 40px;vertical-align: middle;'></td>
    <td>run the previous chunks but not this one</td>
  </tr>
  <tr>
    <td><img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_codechunk_header_runthis.png' style='height: 40px;vertical-align: middle;'></td>
    <td>run this chunk</td>
  </tr>
</tbody>
</table>

:::

::::

## Code evaluation


<div class="div-code"> 
<small>code chunk</small>
```{.r }
{r munsingenspat, echo = TRUE, warning = FALSE, message = FALSE}
```
</div>
  
  
<table>
<thead>
  <tr>
    <th>code</th>
    <th>description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>`include = FALSE`</td>
    <td>prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and the results can be used by other chunks.</td>
  </tr>
  <tr>
    <td>`echo = FALSE`</td>
    <td>prevents code, but not the results from appearing in the finished file.</td>
  </tr>
  <tr>
    <td>`message = FALSE`</td>
    <td>prevents messages that are generated by code from appearing in the finished file.</td>
  </tr>
  <tr>
    <td>`warning = FALSE`</td>
    <td>prevents warnings that are generated by code from appearing in the finished.</td>
  </tr>
</tbody>
</table>

## Graphical options {.unnumbered}

<div class="div-code"> 
<small>code chunk</small>
```{.r }
{r munsingenspat, fig.height = 10, fig.with = 10}
```
</div>
  

<table>
<thead>
  <tr>
    <th>code</th>
    <th>description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>`fig.cap = "..."`</td>
    <td> adds a caption to graphical results.</td>
  </tr>
  <tr>
    <td>`fig.height = 7`</td>
    <td>height for plots created by the chunk (in inches).</td>
  </tr>
  <tr>
    <td>`fig.width = 7`</td>
    <td>width for plots created by the chunk (in inches).</td>
  </tr>
  <tr>
    <td>`fig.align = default`</td>
    <td>how to align graphics in the final document. One of `'left'`, `'right'`, or `'center'`.</td>
  </tr>
    <tr>
    <td>`fig.pos = 'H'`</td>
    <td>fix the output exactly here.</td>
  </tr>
</tbody>
</table>


## Body

The body of a code chunk is where you place the R code


<div class="div-code"> 
<small>code chunk</small>
```{.r code-line-numbers="2-15"}
{r munsingenspat, echo=TRUE, warning = FALSE, message = FALSE}
library(dplyr)
library(leaflet)
munsingen.long <- 7.569587484129203
munsingen.lat <- 46.864709895956004
leaflet(width = "60%", height = "400px") %>%
  addTiles(group = 'OSM') %>%
  addControl("Munsingen necropolis", position = "bottomright") %>%
  addProviderTiles(providers$Esri.WorldImagery, group='Esri.WorldImagery') %>%
  addMarkers(munsingen.long,
             munsingen.lat,
             label = "Munsingen necropolis") %>%
  addLayersControl(
    baseGroups = c('OSM', 'Esri.WorldImagery')) %>%
  addScaleBar(position = "bottomleft")
```
</div>

## Images

Images can be render inside a code chunk:

<div class="div-code"> 
<small>code chunk</small>
```{.r}
knitr::include_graphics("https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/munsingen_fib_measures.png")
```
</div>
  
  
```{r }
#| out-width: "50%"

knitr::include_graphics("https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/munsingen_fib_measures.png")
```




## YAML {#yaml}

<div class="div-yaml"> 
<small>header YAML</small>
```{.yml}
---
title: "temp"
output: pdf_document
date: '2023-02-05'
---
```
</div>

This is the document header, it contains the metadata (e.g, title), the document output format (e.g, pdf) and configuration (e.g. table of content). It is composed on key - value pairs:


```{=html}
<script src="https://gist.github.com/zoometh/d1b4945d1c16f853a7888ede03c4807d.js"></script>
```

## YAML dates

<div class="div-yaml"> 
<small>header YAML</small>
```{.yml code-line-numbers="4"}
---
title: "temp"
output: pdf_document
date: "'r format(Sys.time(), '%D')'"
---
```
</div>

`r format(Sys.time(), '%D')`


<div class="div-yaml"> 
<small>header YAML</small>
```{.yml code-line-numbers="4"}
---
title: "temp"
output: pdf_document
date: "'r format(Sys.time(), '%d %B %Y')'"
---
```
</div>

`r format(Sys.time(), '%d %B %Y')`

::: {.callout-warning}
Here the <notes>`</notes> quote has been changed to a <notes>'</notes> quote for display purpose
:::
\

## YAML output
  
<div class="div-yaml"> 
<small>header YAML</small>
```{.yml code-line-numbers="4-5"}
---
title: "temp"
date: '2023-02-05'
output:
  pdf_document
---
```
</div>

Select the output format, here a PDF: <small><https://github.com/zoometh/thomashuet/blob/main/teachings/stats/R4Archaeo/temp.pdf></small>


```{=html}
<script src="https://gist.github.com/zoometh/d1b4945d1c16f853a7888ede03c4807d.js"></script>
```


## YAML table of content

Table of content (TOC)  

<div class="div-yaml"> 
<small>header YAML</small>
```{.yml code-line-numbers="6-8|5|4"}
---
title: "temp"
date: '2023-02-05'
output:
  html_document:
    toc: true
    toc_depth: 2
    toc_float:
      collapsed: false
      smooth_scroll: false
---
```
</div>



## YAML references

<div class="div-yaml"> 
<small>header YAML</small>
```{.yml code-line-numbers="5"}
---
title: "temp"
output: pdf_document
date: "`r format(Sys.time(), '%d %B %Y')`"
bibliography: references.bib
---
```
</div>

Reference the bibliographic file (e.g.  [`references.bib`](https://github.com/zoometh/thomashuet/blob/main/teachings/stats/R4Archaeo/references.bib)). Here in the same folder as the `.Rmd` file.


```{=html}
<iframe width="1000" height="400" src="https://bookdown.org/yihui/rmarkdown/html-document.html#html-document" title="YAML for R Markdown"></iframe>
```

see [Xie <em>et al.</em>](https://bookdown.org/yihui/rmarkdown/html-document.html#html-document) [-@Xie18]


## Styling

::: {.panel-tabset}

### HTML/CSS

HTML/CSS can be use in all parts of the document

<div class="div-code"> 
<small>code chunk</small>
```{.r }
...
water.values <- paste0("<b>", Oxford.water$Place, "</b><br>", 
                       "Observed: ", Oxford.water$OxfordPct)
water.residuals <- paste0("<b>", Oxford.water$Place, "</b><br>",
                          "Observed: ", round(Oxford.water$predicted, 2))
...
          add_trace(name = "Regression line", x = ~OxfordDst, y = fitted(lm.water),
                    mode = 'lines', line = list(color = 'darkgrey', width = 1.5),
                    text = ~paste0("R<sup>2</sup>: ", round(r2.water, 2)),
                    hoverinfo = 'text') %>%
...
        layout(title = paste0('Oxford pottery with a probable <b>no water</b> ', 
                              'transportation <br> (R<sup>2</sup> = ', r2.nowater, ")"),
...

```
</div>
\

### In the document


<div class="div-text"> 
<small>narrative part</small>
```{.html}
<span style='font-size: 60px'>Big font</span>
```
</div>

<span style='font-size: 60px'>Big font</span>

<div class="div-text"> 
<small>narrative part</small>
```{.html}
<b>bolded</b>
```
</div>

<b>bolded</b> 

<div class="div-text"> 
<small>narrative part</small>
```{.html}
<span style="color:red">red</span>
```
</div>

<span style="color:red">red</span>

### In a CSS file

Use a CSS file to customize styles

```{=html}
<script src="https://gist.github.com/zoometh/1c360f5a09ae489cddd500c01fa52035.js"></script>
```
<small><https://github.com/zoometh/thomashuet/blob/main/teachings/stats/R4Archaeo/styles.css></small>

This file is called inside the YAML header of the document:

<div class="div-yaml"> 
<small>header YAML</small>
```{.yml code-line-numbers="11"}
---
title: "Report with R Markdown"
subtitle: "Report data analysis with R Markdown authoring framework"
author: "Thomas Huet, University of Oxford"
format:
  revealjs: 
    slide-number: true
    chalkboard: true
    scrollable: true
    logo: www/inst-uni-oxford_.png
    css: styles.css
    margin: 0.01
bibliography: references.bib
pagetitle: Report with R Markdown
---
```
</div>

Here in the same folder as the `.Rmd` file. Do:

<div class="div-text"> 
<small>narrative part</small>
```{.md }
Customize with CSS like this <notes>**dodgerblue** background</notes>.
```
</div>

üóò Customize with CSS like this <notes>**dodgerblue** background</notes>.
\
\

:::

## HTML online editor
  
::: {.panel-tabset}
  
### w3schools.com

```{=html}
<iframe width="1000" height="300" src="https://www.w3schools.com/tryit/tryit.asp?filename=tryhtml_hello" title="YAML for R Markdown"></iframe>
```
<small><https://www.w3schools.com/tryit/tryit.asp?filename=tryhtml_hello></small>
\

### tutorialspoint.com

```{=html}
<iframe width="1000" height="300" src="https://www.tutorialspoint.com/online_html_editor.php"></iframe>
```
<small><https://www.tutorialspoint.com/online_html_editor.php></small>
\

:::

## Interactivity

::: {.panel-tabset}

### Shiny

[Shiny](https://shiny.rstudio.com/) offers a framework to create interactive documents

<div class="div-yaml"> 
<small>header YAML</small>
```{.md}
runtime: shiny
```
</div>        
        
::: {.callout-note}
Try: `File > New File > Rmarkdown > Shiny`, or in the YAML header. There are different ways to use Shiny in R Markdown, for example by embedding an HTML widget created by Shiny outside the R Markdown document, or by embedding the Shiny coding directly.
::: 
\

### Leaflet

Maps with <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-leaflet.png" style="height: 45px;vertical-align: middle;"/> package

<div class="div-code"> 
<small>code chunk</small>
```{r munsingenspat, echo=TRUE, warning = FALSE, message = FALSE, fig.pos='H'}
library(dplyr)
library(leaflet)
munsingen.long <- 7.569587484129203
munsingen.lat <- 46.864709895956004
leaflet(width = "90%", height = "300px") %>%
  addTiles(group = 'OSM') %>%
  addControl("Munsingen necropolis", position = "bottomright") %>%
  addProviderTiles(providers$Esri.WorldImagery, group='Esri.WorldImagery') %>%
  addMarkers(munsingen.long,
             munsingen.lat,
             label = "Munsingen necropolis") %>%
  addLayersControl(
    baseGroups = c('OSM', 'Esri.WorldImagery')) %>%
  addScaleBar(position = "bottomleft")
```
</div>

### Plotly

2D plots with the <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-plotly.png" style="height: 45px;vertical-align: middle;"/> package

<div class="div-code"> 
<small>code chunk</small>
```{r munsingenplot2D, message=FALSE, echo=TRUE, warning = FALSE, fig.pos='H'}
library(plotly)
library(dplyr)
library(archdata)
data("Fibulae")
Fibulae.ex <- Fibulae
Fibulae.ex$lbl <- paste0("<b>Museum num.: ", Fibulae.ex$Mno, "</b><br>",
                          "Length: ", Fibulae.ex$Length, "<br>",
                          "Foot Angle: ", Fibulae.ex$FA, "<br>")
plot_ly(data = Fibulae.ex, 
        x = ~Length,
        y = ~FA,
        text = ~lbl,
        hoverinfo = "text")
```
</div>

:::


## Export document

Export R Markdown in: HTML, PDF, LaTeX, Word, ODT, RTF, Markdown, etc. 

```{=html}
<iframe width="1000" height="400" src="https://rmarkdown.rstudio.com/lesson-9.html"></iframe>
```



## HTML

HTML export is the default option of a R Markdown document.

<div class="div-yaml"> 
<small>header YAML</small>
```{.md code-line-numbers="4"}
---
title: "temp"
date: '2023-02-05'
output: html_document
---
```
</div>

## PDF

<div class="div-yaml"> 
<small>header YAML</small>
```{.md code-line-numbers="4"}
---
title: "temp"
date: '2023-02-05'
output: pdf_document
---
```
</div>


::: {.callout-note}
For advanced editing, read below
::: 


<img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-bookdown.png' style='height: 70px;vertical-align: middle;'> is useful in R Markdown for chunk calls, and more generally for cross-referencing. PDF uses LaTeX syntax, if you don't have [MiKTeX](https://miktex.org/) installed, you need to install the <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/r-pkg-tinytex.png" style="height: 70px;vertical-align: middle;"/> package [@Xie19].
  

```{r eval=FALSE, echo=TRUE}
install.packages('tinytex')
tinytex::install_tinytex()
# .rs.restartR()
```

To export in PDF, use `bookdown::pdf_document2:` and knit. 

<div class="div-yaml"> 
<small>header YAML</small>
```{.md code-line-numbers="5-6"}
---
title: "temp"
output: pdf_document
date: '2023-02-05'
output:
  bookdown::pdf_document2:
    css: styles.css
    toc: yes
    toc_depth: 4
    toc_float:
      collapsed: no
bibliography: references.bib
---
```
</div>
  
These temporary files are creates:
  
![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_knit_pdf.png){width="400px"}

At the end of the rendering, these files are deleted.

## LaTeX

LaTeX (extension of TeX) is a rich plain text syntax for academic writing. To export in TeX, select in the YAML header a PDF export + keep tex:

<div class="div-yaml"> 
<small>header YAML</small>
```{.md code-line-numbers="5-6"}
---
title: "temp"
date: '2023-02-05'
output:
  bookdown::pdf_document2: 
    keep_tex: true
---
```
</div>

## Publishing 

::: {.panel-tabset}

### On Rpubs


On <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-rpubs.png" style="height: 45px;vertical-align: middle;"/>, after Render: <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/rmd_publish_Rpubs.png" style="height: 45px;vertical-align: middle;"/>


```{=html}
<iframe width="1000" height="400" src="https://rpubs.com/"></iframe>
```
<small><https://rpubs.com/></small>


### On GitHub and GitLab

On GitHub <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-github.png" style="height: 45px;vertical-align: middle;"/>, or GitLab <img src="https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-gitlab.png" style="height: 45px;vertical-align: middle;"/>, the same document, or related documents, are accessibles by different means:

<table>
<thead>
  <tr>
    <th>output</th>
    <th>URL</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>raw</td>
    <td><small><https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/R4Archaeo/practice/2_Rmarkdown_Practice.Rmd></small></td>
  </tr>
  <tr>
    <td>Rmd</td>
    <td><small><https://github.com/zoometh/thomashuet/blob/main/teachings/stats/R4Archaeo/practice/2_Rmarkdown_Practice.Rmd></small></td>
  </tr>
  <tr>
    <td>PDF</td>
    <td><small><https://github.com/zoometh/thomashuet/blob/main/teachings/stats/R4Archaeo/practice/2_Rmarkdown_Practice.pdf></small></td>
  </tr>
</tbody>
</table>

:::


## Practice {#practice}

::: {.panel-tabset}

### Objective

::: {.callout-note}
The practical part has an estimated duration of 60 minutes
:::

Use R Markdown (code chunks and narrative text) to create a report. Choice between:

- [ ] improvement of the existing `.Rmd` model for the fibulae from the M√ºnsingen cemetery

<center>

![](https://raw.githubusercontent.com/zoometh/thomashuet/master/teach/www/munsingen_fib_measures.png){width="400px"}

</center>

- [ ] select another dataset from the {`archdata`} package (e.g. 'Handaxes'), to improve the `.Rmd` template


### Data

Download the files from the `practice/` folder: 
```{.html}
https://github.com/zoometh/thomashuet/tree/main/teachings/stats/R4Archaeo/practice
```

You can use this website: 
```{=html}
<iframe width="1000" height="200" src="https://download-directory.github.io/"></iframe>
```
<small><https://download-directory.github.io/></small>

or go [here](https://github.com/zoometh/thomashuet/tree/main/teachings/stats/R4Archaeo/practice) and download, or copy/paste the `.Rmd` file and the .`bib` file.

\


### Output

Contact me here üëã

<center>or</center>

Send me your updated `.Rmd`, and eventually the connected files (e.g. `references.bib`) here:

  - <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/gmail.png' style='height: 50px;vertical-align: middle;'> <thomas.huet@arch.ox.ac.uk>

  - <img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-github.png' style='height: 50px;vertical-align: middle;'> <https://github.com/zoometh/thomashuet/issues/1>


:::



## References
