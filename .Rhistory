fig <- plot_ly()
finePots <- OxfordPots[!is.na(OxfordPots$OxfordPct) & !is.na(OxfordPots$NewForestPct), ]
labels <- paste0(" ", rownames(finePots), ". ", finePots$Place)
finePots <- finePots[ , c("Place", "OxfordPct", "NewForestPct")]
ws.melt <- melt(finePots)
ct <- 0
for(a.place in unique(ws.melt$Place)){
# a.place <- "Dorchester (Dorset)"
df <- ws.melt[ws.melt$Place == a.place, ]
labels <- paste0(rownames(finePots[finePots$Place == a.place, ]), ". ", a.place)
fig <- fig %>% add_pie(data = df, labels = ~variable, values = ~value,
name = labels, domain = list(row = ct, column = 0))
ct <- ct + 1
}
fig %>% layout(title = "Pie Charts with Subplots", showlegend = F,
grid=list(rows=ct, columns=1),
xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))
ct
runApp('teachings/stats/_stats/dim2-map')
runApp('teachings/stats/_stats/dim2-map')
runApp('teachings/stats/_stats/dim2-map')
runApp('teachings/stats/_stats/dim2-map')
runApp('teachings/stats/_stats/dim2-map')
shiny::runApp('teachings/stats/_stats/dim2-map')
runApp('teachings/stats/_stats/dim2-map')
runApp('teachings/stats/_stats/dim2-map')
runApp('teachings/stats/_stats/dim2')
devtools::install_github("eamena-oxford/eamenaR")
devtools::install_github("eamena-oxford/eamenaR", INSTALL_opts = '--no-lock')
devtools::install_github("eamena-oxford/eamenaR")
devtools::install_github("eamena-oxford/eamenaR")
shiny::runApp('teachings/stats/_stats/dim3')
dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"), sep = ";") # server
dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"), sep = ";") # server
paste0(getwd(), "/dfisotops.csv")
runApp('teachings/stats/stats/dim3')
runApp('teachings/stats/stats/dim3')
runApp('teachings/stats/stats/dim3')
df.isotop.filtered <- dfisotops[dfisotops$object %in% c(input$objects, input$mines), ]
dfisotops <- read.csv2("https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/stats/dim3/dfisotops.csv", sep = ";") # GH
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"), sep = ";") # server
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"),  sep = ";") # locally
dfisotops$Pb206_Pb204.perc <- (dfisotops$Pb206_Pb204/(dfisotops$Pb206_Pb204 + dfisotops$Pb207_Pb204 + dfisotops$Pb208_Pb204))*100
dfisotops$Pb207_Pb204.perc <- (dfisotops$Pb207_Pb204/(dfisotops$Pb206_Pb204 + dfisotops$Pb207_Pb204 + dfisotops$Pb208_Pb204))*100
dfisotops$Pb208_Pb204.perc <- (dfisotops$Pb208_Pb204/(dfisotops$Pb206_Pb204 + dfisotops$Pb207_Pb204 + dfisotops$Pb208_Pb204))*100
dfisotops$lbl <- paste0(dfisotops$num, "\n",
"<sup>206/204</sup>Pb: ", round(dfisotops$Pb206_Pb204.perc, 2), "% \n",
"<sup>207/204</sup>Pb: ", round(dfisotops$Pb207_Pb204.perc, 2), "% \n",
"<sup>208/204</sup>Pb: ", round(dfisotops$Pb208_Pb204.perc, 2), "%")
df.isotop.filtered <- dfisotops[dfisotops$object %in% c(input$objects, input$mines), ]
head(dfisotops)
runApp('teachings/stats/stats/dim3')
runApp('teachings/stats/stats/dim3')
schema(F)$traces$scatter$attributes$marker$symbol$values
unique(dfisotops$object)
unique(dfisotops$symbol)
unique(dfisotops$object)
symbols.used <- symbols[:2]
symbols.used <- symbols[c(1:2)]
symbols <- c('circle', 'square', 'triangle-up', 'diamond', 'star', 'cross')
c(1:2)
symbols.used <- symbols[c(1:2)]
symbols.used
objects.used <- unique(dfisotops$object)
symbols.used <- symbols[c(1:length(objects.used))]
#TODO: pass this assignations to itineRis 'symbol' calculation
symbols.default <- c('circle', 'square', 'triangle-up', 'diamond', 'star', 'cross')
objects.used <- unique(dfisotops$object)
symbols.used <- symbols.default[c(1:length(objects.used))
]
symbols.used
symbols.objects <- data.frame(objects = objects.used,
symbols = symbols.used))
symbols.default <- c('circle', 'square', 'triangle-up', 'diamond', 'star', 'cross')
objects.used <- unique(dfisotops$object)
symbols.used <- symbols.default[c(1:length(objects.used))]
symbols.objects <- data.frame(objects = objects.used,
symbols = symbols.used)
symbols.objects
dfisotops <- merge(dfisotops, symbols.objects, by = "objects", all.x = TRUE)
dfisotops <- read.csv2("https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/stats/dim3/dfisotops.csv", sep = ";") # GH
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"), sep = ";") # server
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"),  sep = ";") # locally
#TODO: pass this assignations to itineRis 'symbol' calculation
symbols.default <- c('circle', 'square', 'triangle-up', 'diamond', 'star', 'cross')
objects.used <- unique(dfisotops$object)
symbols.used <- symbols.default[c(1:length(objects.used))]
symbols.objects <- data.frame(object = objects.used,
symbol = symbols.used)
dfisotops <- merge(dfisotops, symbols.objects, by = "object", all.x = TRUE)
runApp('teachings/stats/stats/dim3')
dfisotops <- read.csv2("https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/stats/dim3/dfisotops.csv", sep = ";") # GH
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"), sep = ";") # server
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"),  sep = ";") # locally
#TODO: pass this assignations to itineRis 'symbol' calculation
symbols.default <- c('circle', 'square', 'triangle-up', 'diamond', 'star', 'cross')
objects.used <- unique(dfisotops$object)
symbols.used <- symbols.default[c(1:length(objects.used))]
symbols.objects <- data.frame(object = objects.used,
symbol = symbols.used)
dfisotops <- merge(dfisotops, symbols.objects, by = "object", all.x = TRUE)
dfisotops
dfisotops <- read.csv2("https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/stats/dim3/dfisotops.csv", sep = ";") # GH
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"), sep = ";") # server
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"),  sep = ";") # locally
#TODO: pass this assignations to itineRis 'symbol' calculation
symbols.default <- c('circle', 'square', 'triangle-up', 'diamond', 'star', 'cross')
objects.used <- unique(dfisotops$object)
symbols.used <- symbols.default[c(1:length(objects.used))]
symbols.objects <- data.frame(object = objects.used,
symbol = symbols.used)
dfisotops <- merge(dfisotops, symbols.objects, by = "object", all.x = TRUE)
dfisotops$Pb206_Pb204.perc <- (dfisotops$Pb206_Pb204/(dfisotops$Pb206_Pb204 + dfisotops$Pb207_Pb204 + dfisotops$Pb208_Pb204))*100
dfisotops$Pb207_Pb204.perc <- (dfisotops$Pb207_Pb204/(dfisotops$Pb206_Pb204 + dfisotops$Pb207_Pb204 + dfisotops$Pb208_Pb204))*100
dfisotops$Pb208_Pb204.perc <- (dfisotops$Pb208_Pb204/(dfisotops$Pb206_Pb204 + dfisotops$Pb207_Pb204 + dfisotops$Pb208_Pb204))*100
dfisotops$lbl <- paste0(dfisotops$num, "\n",
"<sup>206/204</sup>Pb: ", round(dfisotops$Pb206_Pb204.perc, 2), "% \n",
"<sup>207/204</sup>Pb: ", round(dfisotops$Pb207_Pb204.perc, 2), "% \n",
"<sup>208/204</sup>Pb: ", round(dfisotops$Pb208_Pb204.perc, 2), "%")
m <- list(
l = 50,
r = 50,
b = 50,
t = 100,
pad = 20
)
head(dfisotops)
dfisotops <- read.csv2("https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/stats/dim3/dfisotops.csv", sep = ";") # GH
runApp('teachings/stats/stats/dim3')
runApp('teachings/stats/stats/dim3')
dfisotops <- read.csv2("https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/stats/dim3/dfisotops.csv", sep = ";") # GH
head(dfisotops)
runApp('teachings/stats/stats/dim3')
runApp('teachings/stats/stats/dim3')
colnames(dfisotops)
X <- misc3d::kde3d(dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]],
h,
n = 20,
lims = c(range(x), range(y), range(z)))
X
X <- misc3d::kde3d(dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]],
n = 40,
lims = c(range(x), range(y), range(z)))
X
?misc3d::kde3d
X <- misc3d::kde3d(dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]],
n = 40,
lims = c(
range(dfisotops[["Pb206_Pb204"]]),
range(dfisotops[["Pb207_Pb204"]]),
range(dfisotops[["Pb208_Pb204"]])
)
)
X
dens3d <- misc3d::kde3d(dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]],
n = 40,
lims = c(
range(dfisotops[["Pb206_Pb204"]]),
range(dfisotops[["Pb207_Pb204"]]),
range(dfisotops[["Pb208_Pb204"]])
)
)
# Find the estimated density at each observed point
datadensity <- approx3d(dens3d$x, dens3d$y, dens3d$z,
dens3d$d,
dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]])
# Find the contours
prob <- .5
levels <- quantile(datadensity, probs = prob, na.rm = TRUE)
# Plot it
colours <- c("gray", "orange")
cuts <- cut(datadensity, c(0, levels, Inf))
for (i in seq_along(levels(cuts))) {
gp <- as.numeric(cuts) == i
spheres3d(dfisotops[gp, "Pb206_Pb204"],
dfisotops[gp, "Pb207_Pb204"],
dfisotops[gp, "Pb208_Pb204"],
col = colours[i],
radius = 0.2)
}
box3d(col = "gray")
contour3d(dens3d$d, level = levels,
x = dens3d$x, y = dens3d$y, z = dens3d$z, #exp(-12)
alpha = .1, color = "red", color2 = "gray", add = TRUE)
title3d(xlab = "x", ylab = "y", zlab = "z")
library(misc3d)
library(MASS)
library(misc3d)
library(rgl)
library(oce)
dens3d <- misc3d::kde3d(dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]],
n = 40,
lims = c(
range(dfisotops[["Pb206_Pb204"]]),
range(dfisotops[["Pb207_Pb204"]]),
range(dfisotops[["Pb208_Pb204"]])
)
)
# Find the estimated density at each observed point
datadensity <- approx3d(dens3d$x, dens3d$y, dens3d$z,
dens3d$d,
dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]])
# Find the contours
prob <- .5
levels <- quantile(datadensity, probs = prob, na.rm = TRUE)
# Plot it
colours <- c("gray", "orange")
cuts <- cut(datadensity, c(0, levels, Inf))
for (i in seq_along(levels(cuts))) {
gp <- as.numeric(cuts) == i
spheres3d(dfisotops[gp, "Pb206_Pb204"],
dfisotops[gp, "Pb207_Pb204"],
dfisotops[gp, "Pb208_Pb204"],
col = colours[i],
radius = 0.2)
}
box3d(col = "gray")
contour3d(dens3d$d, level = levels,
x = dens3d$x, y = dens3d$y, z = dens3d$z, #exp(-12)
alpha = .1, color = "red", color2 = "gray", add = TRUE)
title3d(xlab = "x", ylab = "y", zlab = "z")
title3d(xlab = "x", ylab = "y", zlab = "z")
title3d(xlab = "x", ylab = "y", zlab = "z")
library(misc3d)
library(MASS)
library(misc3d)
library(rgl)
library(oce)
dfisotops <- read.csv2("https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/stats/dim3/dfisotops.csv", sep = ";") # GH
dens3d <- misc3d::kde3d(dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]],
n = 40,
lims = c(
range(dfisotops[["Pb206_Pb204"]]),
range(dfisotops[["Pb207_Pb204"]]),
range(dfisotops[["Pb208_Pb204"]])
)
)
# Find the estimated density at each observed point
datadensity <- approx3d(dens3d$x, dens3d$y, dens3d$z,
dens3d$d,
dfisotops[["Pb206_Pb204"]],
dfisotops[["Pb207_Pb204"]],
dfisotops[["Pb208_Pb204"]])
# Find the contours
prob <- .5
levels <- quantile(datadensity, probs = prob, na.rm = TRUE)
# Plot it
colours <- c("gray", "orange")
cuts <- cut(datadensity, c(0, levels, Inf))
for (i in seq_along(levels(cuts))) {
gp <- as.numeric(cuts) == i
spheres3d(dfisotops[gp, "Pb206_Pb204"],
dfisotops[gp, "Pb207_Pb204"],
dfisotops[gp, "Pb208_Pb204"],
col = colours[i],
radius = 0.2)
}
box3d(col = "gray")
contour3d(dens3d$d, level = levels,
x = dens3d$x, y = dens3d$y, z = dens3d$z, #exp(-12)
alpha = .1, color = "red", color2 = "gray", add = TRUE)
title3d(xlab = "x", ylab = "y", zlab = "z")
?title3d
library(MASS)
library(ks)
library(misc3d)
x <- dfisotops[ , c("Pb206_Pb204", "Pb207_Pb204", "Pb208_Pb204")]
H.pi <- Hpi(x, pilot = "samse")
fhat <- kde(x, H = H.pi, compute.cont = TRUE)
plot(fhat, drawpoints = TRUE)
x <- rnorm(1000)
y <- 2 + x*rnorm(1000,1,.1) + rnorm(1000)
library(MASS)
den3d <- kde2d(x, y)
persp(den3d, box=FALSE)
shiny::runApp('teachings/stats/stats/dim3')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2-map')
runApp('teachings/stats/stats/dim2-map')
?Sys.getlocale
shiny::runApp('teachings/stats/stats/dim3')
?Sys.setlocale
schema(F)$traces$scatter$attributes$marker$symbol$values
class(schema(F)$traces$scatter$attributes$marker$symbol$values)
schema(F)$traces$scatter$attributes$marker$symbol$values
# Teaching app
# data with 3 dimensions
Sys.setlocale("LC_ALL", "C")
library(plotly)
dfisotops <- read.csv2("https://raw.githubusercontent.com/zoometh/thomashuet/main/teachings/stats/stats/dim3/dfisotops.csv", sep = ";") # GH
# dfisotops$X <- NULL
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"), sep = ";") # server
# dfisotops <- read.csv2(paste0(getwd(), "/dfisotops.csv"),  sep = ";") # locally
dfkmeans <- kmeans(x = dfisotops[, c("Pb206_Pb204", "Pb207_Pb204", "Pb208_Pb204")],
centers = 3,
nstart = 20)
dfisotops$cluster <- dfkmeans$cluster
library(NbClust)
nbcenters.best <- NbClust(data = dfisotops[, c("Pb206_Pb204", "Pb207_Pb204", "Pb208_Pb204")],
distance = "euclidean",
method = "ward.D2",
index = c("gap", "silhouette"))
nbcenters.best$Best.partition
nbcenters.best$Best.nc
nbcenters.best$Best.nc[1, "Gap"]
centers.best <- NbClust(data = dfisotops[, c("Pb206_Pb204", "Pb207_Pb204", "Pb208_Pb204")],
distance = "euclidean",
method = "ward.D2",
index = c("gap", "silhouette"))
nb.centers.best <- centers.best$Best.nc[1, "Gap"]
library(shiny); runApp('teachings/stats/stats/dim3/app_2.R')
runApp('app_2.R')
runApp('teachings/stats/stats/dim3/app_2.R')
runApp('teachings/stats/stats/dim3/app_2.R')
runApp('teachings/stats/stats/dim3/app_2.R')
runApp('teachings/stats/stats/dim3/app_2.R')
runApp('teachings/stats/stats/dim3/app_2.R')
runApp('teachings/stats/stats/dim3')
runApp('teachings/stats/stats/dim3')
?kmeans
shiny::runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2')
runApp('teachings/stats/stats/dim2-map')
runApp('teachings/stats/stats/dim2-map')
runApp('teachings/stats/stats/dim2-map')
runApp('teachings/stats/stats/dim2-map')
runApp('teachings/stats/stats/dim2-map')
OxfordP <- "C:/Rprojects/thomashuet/teachings/stats/UPV/images/art-pottery-oxford.jpg"
NewForP <- "C:/Rprojects/thomashuet/teachings/stats/UPV/images/art-pottery-newforest.jpg"
OxfordP.txt <- RCurl::base64Encode(readBin(OxfordP, "raw", file.info(OxfordP)[1, "size"]), "txt")
NewForP.txt <- RCurl::base64Encode(readBin(NewForP, "raw", file.info(NewForP)[1, "size"]), "txt")
library(shiny)
library(leaflet)
library(leaflet.minicharts)
library(plotly)
library(archdata)
library(dplyr)
library(DT)
library(reshape)
data(OxfordPots)
# rectify an error in the dataset
OxfordPots[OxfordPots$Place == "Gatcombe", "NewForestPct"] <- 0
## New Forest vs Oxford
finePots <- OxfordPots[!is.na(OxfordPots$OxfordPct) & !is.na(OxfordPots$NewForestPct), ]
labels <- paste0(" ", rownames(finePots), ". ", finePots$Place)
finePots <- finePots[ , c("Place", "OxfordPct", "NewForestPct")]
## by transport
Oxford.water <- subset(OxfordPots, WaterTrans == 1)
Oxford.lm.water <- lm(log(OxfordPct)~OxfordDst, Oxford.water)
lm.water <- lm(OxfordPct ~ OxfordDst, data = Oxford.water)
# lm.water.R2 <- round(summary(lm.water)$r.squared, 2)
r2.water <- round(summary(lm.water)$r.squared, 2)
Oxford.water$predicted <- predict(lm.water)   # Save the predicted values
Oxford.water$residuals <- residuals(lm.water) # Save the residual values
water.values <- paste0("<b>", Oxford.water$Place, "</b><br>",
"Observed: ", Oxford.water$OxfordPct)
water.residuals <- paste0("<b>", Oxford.water$Place, "</b><br>",
"Observed: ", round(Oxford.water$predicted, 2))
# no water
Oxford.nowater <- subset(OxfordPots, WaterTrans == 0)
Oxford.lm.nowater <- lm(log(OxfordPct)~OxfordDst, Oxford.nowater)
lm.nowater <- lm(OxfordPct ~ OxfordDst, data = Oxford.nowater)
r2.nowater <- round(summary(lm.nowater)$r.squared, 2)
# lm.nowater.R2 <- round(summary(lm.nowater)$r.squared, 2)
Oxford.nowater$predicted <- predict(lm.nowater)   # Save the predicted values
Oxford.nowater$residuals <- residuals(lm.nowater) # Save the residual values
nowater.values <- paste0("<b>", Oxford.nowater$Place, "</b><br>",
"Observed: ", Oxford.nowater$OxfordPct)
nowater.residuals <- paste0("<b>", Oxford.nowater$Place, "</b><br>",
"Observed: ", round(Oxford.nowater$predicted, 2))
Place.coords.path <- "C:/Rprojects/thomashuet/teachings/stats/stats/dim2/oxfordpots_data.xlsx"
Place.coords <- openxlsx::read.xlsx(Place.coords.path, 1)
Place.coords <- Place.coords[ , c("Place", "lon", "lat")]
Place.coords[, c("lon", "lat")] <- sapply(Place.coords[, c("lon", "lat")], as.numeric)
finePots <- merge(finePots, Place.coords, by = "Place")
df.both <- merge(OxfordPots, Place.coords, by = "Place")
df.nowater <- merge(Oxford.nowater, Place.coords, by = "Place")
df.water <- merge(Oxford.water, Place.coords, by = "Place")
colors <- c("green", "red")
finePots <- OxfordPots[!is.na(OxfordPots$OxfordPct) & !is.na(OxfordPots$NewForestPct), ]
labels <- paste0(" ", rownames(finePots), ". ", finePots$Place)
print("edew")
t <- list(
family = "sans serif",
size = 14,
color = "blue")
xy.size <- 6
OxfordP <- "C:/Rprojects/thomashuet/teachings/stats/UPV/images/art-pottery-oxford.jpg"
NewForP <- "C:/Rprojects/thomashuet/teachings/stats/UPV/images/art-pottery-newforest.jpg"
OxfordP.txt <- RCurl::base64Encode(readBin(OxfordP, "raw", file.info(OxfordP)[1, "size"]), "txt")
NewForP.txt <- RCurl::base64Encode(readBin(NewForP, "raw", file.info(NewForP)[1, "size"]), "txt")
m <- list(
l = 50,
r = 50,
b = 100,
t = 50,
pad = 20
)
plot_ly(finePots, x = ~OxfordPct, y = ~NewForestPct, text = labels,
type = 'scatter', mode = 'markers')
plot_ly(finePots, x = ~OxfordPct, y = ~NewForestPct, text = labels,
type = 'scatter', mode = 'markers') %>%
add_text(textfont = t, textposition = 'middle right') %>%
layout(title = paste0('Ratio Oxford pottery/New Forest pottery for ', nrow(finePots),
' Late Roman sites'),
xaxis = list(title = "% Oxford pottery", showgrid = FALSE),
yaxis = list(title = "% New Forest pottery", showgrid = FALSE),
margin = m,
images = list(
list(
source =  paste('data:image/jpg;base64', NewForP.txt, sep=','),
xref = "x",
yref = "y",
x = 15,
y = 18,
sizex = xy.size,
sizey = xy.size,
# sizing = "stretch",
opacity = 1,
layer = "below"
),
list(
source =  paste('data:image/jpg;base64', OxfordP.txt, sep=','),
xref = "x",
yref = "y",
x = 18,
y = 9,
sizex = xy.size,
sizey = xy.size,
# sizing = "stretch",
opacity = 1,
layer = "below"
)
)
)
fig <- plot_ly(finePots, x = ~OxfordPct, y = ~NewForestPct, text = labels,
type = 'scatter', mode = 'markers') %>%
add_text(textfont = t, textposition = 'middle right') %>%
layout(title = paste0('Ratio Oxford pottery/New Forest pottery for ', nrow(finePots),
' Late Roman sites'),
xaxis = list(title = "% Oxford pottery", showgrid = FALSE),
yaxis = list(title = "% New Forest pottery", showgrid = FALSE),
margin = m,
images = list(
list(
source =  paste('data:image/jpg;base64', NewForP.txt, sep=','),
xref = "x",
yref = "y",
x = 15,
y = 18,
sizex = xy.size,
sizey = xy.size,
# sizing = "stretch",
opacity = 1,
layer = "below"
),
list(
source =  paste('data:image/jpg;base64', OxfordP.txt, sep=','),
xref = "x",
yref = "y",
x = 18,
y = 9,
sizex = xy.size,
sizey = xy.size,
# sizing = "stretch",
opacity = 1,
layer = "below"
)
)
)
fig
runApp('teachings/stats/stats/dim2-map')
runApp('teachings/stats/stats/dim2-map')
runApp('teachings/stats/stats/dim2-map/app_1.R')
Place.coords
runApp('teachings/stats/stats/dim2-map/app_1.R')
runApp('teachings/stats/stats/dim2-map/app_1.R')
runApp('teachings/stats/stats/dim2-map/app_1.R')
head(finePots)
runApp('teachings/stats/stats/dim2-map/app_1.R')
runApp('teachings/stats/stats/dim2-map/app_1.R')
